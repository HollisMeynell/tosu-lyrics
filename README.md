<!-- markdownlint-disable MD028 MD033 -->
<h1 align="center">tosu æ­Œè¯æ˜¾ç¤ºå™¨</h1>

## ä»‹ç»

æœ¬é¡¹ç›®é€šè¿‡ [tosu](https://github.com/tosuapp/tosu) è·å– osu å½“å‰æ’­æ”¾çš„æ­Œæ›²ä¿¡æ¯ï¼Œå¹¶å€ŸåŠ©ä¸€ä¸ªç®€å•çš„ [ä»£ç†å·¥å…·](tosu-proxy) ä»ç½‘æ˜“äº‘éŸ³ä¹ç­‰å¤šä¸ªå¹³å°è·å–æ­Œè¯ä¿¡æ¯ï¼Œè§£æååœ¨ç½‘é¡µä¸­æ˜¾ç¤ºå‡ºæ¥ï¼Œä½œä¸º OBS çš„æµè§ˆå™¨æºä½¿ç”¨ã€‚

## ä½¿ç”¨

1. ä¸‹è½½ [tosu](https://github.com/tosuapp/tosu/releases) å¹¶è§£å‹åˆ°ä»»æ„ç›®å½•ï¼ˆä¾‹å¦‚ `/AppData/Roaming` æˆ– `Program Files`ç­‰ï¼‰ã€‚**æ³¨æ„ï¼šæ— éœ€è¿è¡Œ `tosu.exe`ã€‚**
2. ä¸‹è½½ [release](https://github.com/HollisMeynell/tosu-lyrics/releases/) ä¸­çš„å‹ç¼©åŒ…å¹¶å°†æ–‡ä»¶è§£å‹åˆ° tosu çš„æ ¹ç›®å½•ã€‚
3. è¿è¡Œ `tosu-proxy.exe`ã€‚æœ¬è¿‡ç¨‹å°†ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® 41280 ç«¯å£å’Œ 24050 ç«¯å£ã€‚
4. 41280ç«¯å£ç”¨äºæ˜¾ç¤ºæœ¬é¡¹ç›®ï¼Œ24050ç«¯å£å¯åŠ¨çš„ tosu é¢æ¿å¯é€‰æ‹©æ€§å…³é—­ã€‚
5. ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¿é—®[http://127.0.0.1:41280/lyrics/index.html](http://127.0.0.1:41280/lyrics/index.html)ã€‚
6. å°†è¯¥åœ°å€æ·»åŠ åˆ° OBS çš„æµè§ˆå™¨æºä¸­ï¼Œå»ºè®®è®¾ç½®å®½ä¸º 1200ï¼Œé«˜ä¸º 300ã€‚

> [!IMPORTANT]
> **è·¨åŸŸè¯·æ±‚è¯´æ˜**ï¼š
>
> - æ‚¨å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨ OBS æ—¶æ·»åŠ å‚æ•° `--disable-web-security` æ¥å¯ç”¨è·¨åŸŸè¯·æ±‚ã€‚æ­¤æ—¶æ— éœ€ä½¿ç”¨ä»£ç†å·¥å…· `tosu-proxy` ï¼Œç›´æ¥è®¿é—®å³å¯ã€‚ä½†éœ€è¦åœ¨ URL æœ«å°¾æ·»åŠ  `?cors=true` ä»¥å¯ç”¨ç›´æ¥è¯·æ±‚ã€‚
> - è¯·æ³¨æ„ï¼Œæ­¤æ“ä½œä¼šé™ä½ OBS çš„å®‰å…¨æ€§ï¼Œå¦‚æœæ‚¨ä¸äº†è§£å…¶å½±å“ï¼Œè¯·å‹¿ä½¿ç”¨æ­¤æ–¹æ³•ã€‚
> - å¦‚æœæ­Œè¯å§‹ç»ˆæ— æ³•æ˜¾ç¤ºï¼Œè¯´æ˜æ‚¨çš„ OBS ä¸æ”¯æŒæ­¤æ–¹æ³•ï¼Œè¯·ä½¿ç”¨ä»£ç†å·¥å…·ã€‚
> - ç”±äºæµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥é™åˆ¶ï¼Œå¦‚æœä¸ä½¿ç”¨ OBS çš„è·¨åŸŸåŠŸèƒ½ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ `tosu-proxy` ä½œä¸ºä»£ç†ï¼Œå¦åˆ™æ— æ³•è·å–æ­Œè¯ã€‚

> [!IMPORTANT]
> **å®‰å…¨å£°æ˜**:

> - æœ¬é¡¹ç›®æ‰€æœ‰ä»£ç å‡å·²å¼€æºï¼Œå¦‚æœæ‚¨å¯¹å®‰å…¨æ€§æœ‰ç–‘è™‘ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ä»£ç å¹¶ç¼–è¯‘ã€‚

> [!TIP]
>
> - æ–‡ä»¶ç»“æ„: ç¡®ä¿ `tosu-proxy.exe` å’Œ `tosu.exe` ä½äºé¡¹ç›®æ ¹ç›®å½•ï¼Œé™æ€æ–‡ä»¶ä½äº `<tosuæ ¹ç›®å½•>/static/lyrics` ç›®å½•ä¸­ã€‚
> - éš”ç¦»è¯´æ˜: `tosu-proxy` ä»…ä½œä¸ºé¢å¤–çš„ä»£ç†å·¥å…·ï¼Œä¸å½±å“ `tosu` æˆ–å…¶ä»–æ’ä»¶çš„æ­£å¸¸ä½¿ç”¨ã€‚å¯è®¿é—® [`http://127.0.0.1:24050`](http://127.0.0.1:24050) ä½¿ç”¨ä»–ä»¬ã€‚
> - å­—ä½“ä¿®æ”¹: æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹ `LRC.otf` æ›´æ”¹å…¨éƒ¨å­—ä½“, æˆ–è€…æ·»åŠ  `tLRC.otf` (å¯¹åº”ä¸»æ­Œè¯) å’Œ `oLRC.otf` (å¯¹åº”å‰¯æ­Œè¯) æ¥æ›´æ”¹å­—ä½“ã€‚
> - è‡ªå®šä¹‰å­—ä½“æ”¯æŒ `ttf`ã€`woff` ç­‰å­—ä½“æ ¼å¼ï¼Œä½†éœ€å°†æ–‡ä»¶åä¸¥æ ¼å¡«å†™ä¸º `LRC.otf`, `tLRC.otf` æˆ– `oLRC.otf` (å³ 'xxx.ttf' => 'LRC.otf')ã€‚

## å¦‚ä½•æ›´æ–°

> [!IMPORTANT]
> å¦‚æœå·²ç»ä½¿ç”¨äº†æ—§ç‰ˆæœ¬, ä»…éœ€è¦æ›´æ–° `index.html` æ–‡ä»¶å³å¯, å…¶ä»–çš„æ–‡ä»¶æ— éœ€é‡å¤ä¸‹è½½

> [!TIP]
> å¦‚æœæ—§ç‰ˆæœ¬å‡ºç°å¼‚å¸¸çš„æ­Œè¯ï¼Œè¯·æ›´æ–°åæ¸…ç†ç¼“å­˜æ¥è§£å†³ã€‚
>
> æ“ä½œæ–¹æ³•ï¼šå‘ obs æµè§ˆå™¨æºä¸­ url æœ«å°¾æ·»åŠ `?clear-cache=true`å‚æ•°ï¼Œå¹¶ç¡®å®šï¼Œåˆ·æ–°ç¼“å­˜åå°†å‚æ•°å»é™¤

## å¼€å‘

### ä»£ç†å·¥å…·

ç¡®ä¿å·²å®‰è£… Rust ç¼–è¯‘ç¯å¢ƒã€‚

    ```bash
    cd tosu-proxy # è¿›å…¥ä»£ç†å·¥å…·ç›®å½•
    cargo build --release # ç¼–è¯‘ä»£ç†å·¥å…·
    ```

### æ­Œè¯é¡µé¢

ç¡®ä¿å·²å®‰è£… Node.js ç¯å¢ƒã€‚

    ```bash
    cd /<path-to-root> # è¿›å…¥é¡¹ç›®ç›®å½•
    npm install # å®‰è£…ä¾èµ–
    npm run dev # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
    npm run build # ç¼–è¯‘
    ```

å¯å°† `dist` ç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶åˆ° `tosu` çš„ `static/lyrics` ç›®å½•ã€‚

## è‡´è°¢

- æœ¬é¡¹ç›®çš„åŸå‹å’Œæ ·å¼æ”¹è¿›çµæ„Ÿæ¥è‡ª [@EmitPots](https://github.com/EmitPots)ã€‚
- å‚è€ƒé¡¹ç›®ï¼š[LyricDisplayerPlugin](https://github.com/OsuSync/LyricDisplayerPlugin)ã€‚
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·çš„æ”¯æŒï¼ğŸ™Œ
